{% extends "base.html" %}

{% block content %}
<section class="tab-content space-y-6">
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6">
        <div>
            <h2 class="text-xl font-semibold text-slate-900">Digital Library</h2>
            <p class="text-sm text-slate-500 mt-1">Access E-books, Journals, and check your issued book status</p>
        </div>
    </div>

    <div class="minimal-card p-6">
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4">
            <div>
                <h3 class="text-lg font-semibold text-slate-900">Resources</h3>
                <p class="text-sm text-slate-500 mt-1">Notes, PDFs and study materials uploaded by faculty</p>
            </div>
            <div class="w-full sm:w-auto flex items-center justify-between gap-2 sm:justify-end">
                <span class="minimal-badge bg-slate-100 text-slate-700 shrink-0">PDF</span>
                {% if student and ('can_upload_resource' in student.keys()) and (student.can_upload_resource|int == 1) %}
                    <button type="button" class="px-4 py-2 rounded-xl minimal-btn minimal-btn-primary text-sm font-medium inline-flex items-center justify-center gap-2 whitespace-nowrap" data-upload-open><span class="iconify text-base" data-icon="solar:add-square-bold"></span> Upload Resource</button>
                {% else %}
                    <button type="button" class="px-4 py-2 rounded-xl bg-slate-100 text-slate-400 text-sm font-medium inline-flex items-center justify-center gap-2 whitespace-nowrap" disabled><span class="iconify text-base" data-icon="solar:lock-keyhole-bold"></span> Upload Resource</button>
                {% endif %}
            </div>
        </div>

        <form method="get" class="mt-4" id="librarySearchForm">
            <div class="flex items-end gap-3">
                <div class="flex-1">
                    <label class="hidden md:block text-xs font-medium text-slate-500 mb-1">Search</label>
                    <input id="librarySearch" name="q" value="{{ filters.q if filters else '' }}" class="w-full minimal-input h-[46px]" placeholder="Search resources...">
                </div>

                <div class="flex items-center gap-2 justify-end">
                    <button id="libraryFiltersBtn" type="button" class="md:hidden px-3 py-2 rounded-xl bg-slate-100 text-slate-700 text-sm font-medium hover:bg-slate-200 transition-all inline-flex items-center justify-center gap-2 h-[46px]" aria-label="Advanced filters">
                        <span class="iconify text-lg text-slate-600" data-icon="solar:settings-outline"></span>
                        <span class="hidden sm:inline">Filters</span>
                    </button>

                    <details id="libraryDesktopFilters" class="relative hidden md:block"{% if filters and (filters.tag or filters.uploader) %} open{% endif %}>
                    <summary class="list-none cursor-pointer select-none px-4 py-2 rounded-xl bg-slate-100 text-slate-700 text-sm font-medium hover:bg-slate-200 transition-all inline-flex items-center justify-center gap-2 h-[46px]" aria-label="Advanced filters">
                        <span class="iconify text-base text-slate-600" data-icon="solar:settings-outline"></span> Filters
                    </summary>
                    <div class="absolute right-0 top-full mt-2 w-[min(560px,92vw)] z-30">
                        <div class="rounded-2xl border border-slate-200 bg-white p-4 shadow-lg">
                            <div class="grid grid-cols-1 md:grid-cols-6 gap-3">
                                <div class="md:col-span-2">
                                    <label class="block text-xs font-medium text-slate-500 mb-1">Tag</label>
                                    <input name="tag" value="{{ filters.tag if filters else '' }}" class="w-full minimal-input" placeholder="e.g. DSA">
                                </div>
                                <div class="md:col-span-4">
                                    <label class="block text-xs font-medium text-slate-500 mb-1">Uploader</label>
                                    <select name="uploader" class="w-full minimal-input">
                                        <option value="">All</option>
                                        {% for u in uploaders or [] %}
                                            <option value="{{ u }}"{% if filters and filters.uploader == u %} selected{% endif %}>{{ u }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="md:col-span-6 flex flex-col md:flex-row items-stretch md:items-center justify-end gap-2 pt-1">
                                    <button type="submit" class="px-4 py-2 rounded-xl minimal-btn minimal-btn-primary text-sm font-medium inline-flex items-center justify-center gap-2"><span class="iconify text-base" data-icon="solar:check-circle-bold"></span> Apply</button>
                                    <a href="{{ url_for('library') }}" class="px-4 py-2 rounded-xl bg-slate-100 text-slate-700 text-sm font-medium hover:bg-slate-200 transition-all text-center inline-flex items-center justify-center gap-2"><span class="iconify text-base text-amber-600" data-icon="solar:restart-outline"></span> Reset</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    </details>
                </div>
            </div>

            <p class="text-xs text-slate-400 mt-2">Showing <span id="librarySearchVisible">0</span> of <span id="librarySearchTotal">0</span></p>
        </form>

        <div class="mt-4 space-y-3" id="libraryResourceList">
            {% if resources %}
                {% for r in resources %}
                    {% set tag_list = (r.tags.split(',') if r.tags else []) %}
                    {% set href = (url_for('static', filename=r.pdf_url) if r.pdf_url and not (r.pdf_url.startswith('http://') or r.pdf_url.startswith('https://')) else r.pdf_url) %}
                    <div class="p-4 rounded-xl border border-slate-200 bg-white flex flex-col md:flex-row md:items-center justify-between gap-4" data-library-resource data-search-text="{{ (r.heading ~ ' ' ~ r.description ~ ' ' ~ (r.tags or '') ~ ' ' ~ r.uploader)|lower|e }}">
                        <div class="min-w-0">
                            <div class="flex items-start justify-between gap-3">
                                <div class="min-w-0">
                                    <p class="text-sm font-semibold text-slate-900 break-words">{{ r.heading }}</p>
                                    <p class="text-xs text-slate-500 mt-1">{{ r.description }}</p>
                                </div>
                            </div>
                            <div class="flex flex-wrap items-center gap-2 text-xs text-slate-500 mt-3">
                                <span class="flex items-center gap-2"><span class="iconify" data-icon="solar:user-linear"></span> {{ r.uploader }}</span>
                                <span class="w-1 h-1 rounded-full bg-slate-300"></span>
                                <span class="flex items-center gap-2"><span class="iconify" data-icon="solar:clock-circle-linear"></span> {{ r.uploaded_at|fmt_dt }}</span>
                                {% if tag_list and tag_list[0].strip() %}
                                    <span class="w-1 h-1 rounded-full bg-slate-300"></span>
                                    <span class="minimal-badge bg-indigo-50 text-indigo-700">#{{ tag_list[0].strip() }}</span>
                                {% endif %}
                                {% if (tag_list|length) > 1 and tag_list[1].strip() %}
                                    <span class="minimal-badge bg-slate-100 text-slate-600">#{{ tag_list[1].strip() }}</span>
                                {% endif %}
                            </div>
                        </div>
                        <div class="flex items-center gap-2 shrink-0">
                            <a href="{{ href }}" target="_blank" class="px-4 py-2 rounded-xl bg-slate-900 text-white text-sm font-medium hover:bg-slate-800 transition-all inline-flex items-center justify-center gap-2"><span class="iconify text-base" data-icon="solar:eye-bold"></span> Open PDF</a>
                            <div class="relative inline-flex shrink-0">
                                <button type="button" class="px-3 py-2 rounded-xl bg-slate-100 text-slate-700 text-sm font-medium hover:bg-slate-200 transition-all inline-flex items-center justify-center" aria-label="Resource actions" data-library-action-trigger data-resource-id="{{ r.id }}" data-resource-href="{{ href|e }}" data-resource-heading="{{ r.heading|e }}" data-resource-description="{{ r.description|e }}" data-resource-tags="{{ (r.tags or '')|e }}" data-resource-uploader="{{ r.uploader|e }}" data-is-owner="{% if student and ('author_student_id' in r.keys()) and r.author_student_id and (r.author_student_id|int == student.id|int) %}1{% else %}0{% endif %}">
                                    <span class="iconify text-lg" data-icon="solar:menu-dots-bold"></span>
                                </button>
                                <div class="hidden" data-library-action-menu>
                                    <div class="rounded-2xl border border-slate-200 bg-white p-2 w-64 shadow-lg">
                                        <div class="flex flex-col">
                                            <a href="{{ href }}" target="_blank" class="w-full text-left px-3 py-2 rounded-xl hover:bg-slate-50 text-sm text-slate-700 inline-flex items-center gap-2">
                                                <span class="iconify text-base" data-icon="solar:download-outline"></span>
                                                Download
                                            </a>
                                            <button type="button" class="w-full text-left px-3 py-2 rounded-xl hover:bg-slate-50 text-sm text-slate-700 inline-flex items-center gap-2" data-library-share>
                                                <span class="iconify text-base" data-icon="solar:share-bold"></span>
                                                Share
                                            </button>
                                            <button type="button" class="w-full text-left px-3 py-2 rounded-xl hover:bg-slate-50 text-sm text-slate-700 inline-flex items-center gap-2" data-library-edit>
                                                <span class="iconify text-base" data-icon="solar:pen-2-outline"></span>
                                                Change resource details
                                            </button>
                                            <form method="post" action="{{ url_for('library_resource_delete', resource_id=r.id) }}" onsubmit="return confirm('Delete this resource?');" data-library-delete-form>
                                                <button type="submit" class="w-full text-left px-3 py-2 rounded-xl hover:bg-slate-50 text-sm text-rose-700 inline-flex items-center gap-2">
                                                    <span class="iconify text-base text-rose-700" data-icon="solar:trash-bin-trash-outline"></span>
                                                    Delete
                                                </button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <div class="p-6 rounded-xl border border-slate-200 bg-white text-sm text-slate-500">No resources found for the selected filters.</div>
            {% endif %}
        </div>
    </div>

    <div data-upload-backdrop class="fixed inset-0 bg-slate-900/70 backdrop-blur-[2px] opacity-0 pointer-events-none transition-opacity z-50"></div>
    <div data-upload-sheet class="fixed left-0 right-0 bottom-0 translate-y-full opacity-0 pointer-events-none transition-[transform,opacity] duration-200 z-[60]">
        <div class="mx-auto max-w-2xl bg-white rounded-t-3xl border border-slate-300 shadow-[0_30px_80px_rgba(15,23,42,0.35),0_8px_20px_rgba(15,23,42,0.18)] transition-all duration-300 ease-in-out">
            <div class="px-6 pt-4 pb-2" data-upload-handle>
                <div class="w-12 h-1.5 bg-slate-200 rounded-full mx-auto"></div>
                <div class="flex items-center justify-between mt-3">
                    <div>
                        <p class="text-xs text-slate-500">Upload</p>
                        <p class="text-base font-semibold text-slate-900">Upload Resource</p>
                    </div>
                    <button type="button" class="px-4 py-2 rounded-xl bg-slate-100 text-slate-700 text-sm font-medium hover:bg-slate-200 transition-all inline-flex items-center justify-center gap-2" data-upload-close><span class="iconify text-base text-slate-600" data-icon="solar:close-square-outline"></span> Close</button>
                </div>
            </div>
            <div class="px-6 pb-6 max-h-[70vh] overflow-y-auto hide-scrollbar">
                <form method="post" action="{{ url_for('library_resource_upload') }}" enctype="multipart/form-data" class="mt-4">
                    <div class="grid grid-cols-1 md:grid-cols-6 gap-3">
                        <div class="md:col-span-3">
                            <label class="block text-xs font-medium text-slate-500 mb-1">Heading</label>
                            <input name="heading" class="w-full minimal-input" placeholder="e.g. DBMS Unit-2 Notes" required>
                        </div>
                        <div class="md:col-span-3">
                            <label class="block text-xs font-medium text-slate-500 mb-1">Uploader</label>
                            {% if admin_user %}
                                <input name="uploader" class="w-full minimal-input" placeholder="e.g. Prof. Sharma" required>
                            {% else %}
                                <input name="uploader" class="w-full minimal-input" value="{{ (student.name if student else '')|e }}" readonly required>
                            {% endif %}
                        </div>
                        <div class="md:col-span-6">
                            <label class="block text-xs font-medium text-slate-500 mb-1">Description</label>
                            <input name="description" class="w-full minimal-input" placeholder="Short description" required>
                        </div>
                        <div class="md:col-span-3">
                            <label class="block text-xs font-medium text-slate-500 mb-1">Tags (comma separated)</label>
                            <input name="tags" class="w-full minimal-input" placeholder="e.g. DBMS,SQL,Semester-4">
                        </div>
                        <div class="md:col-span-3">
                            <label class="block text-xs font-medium text-slate-500 mb-1">External PDF URL (optional)</label>
                            <input name="pdf_url" class="w-full minimal-input" placeholder="https://...pdf">
                        </div>
                        <div class="md:col-span-6">
                            <label class="block text-xs font-medium text-slate-500 mb-1">Or Upload PDF (optional)</label>
                            <input type="file" name="pdf_file" accept="application/pdf" class="w-full minimal-input">
                            <p class="text-xs text-slate-400 mt-1">Provide either External URL or Upload a PDF file.</p>
                        </div>
                        <div class="md:col-span-6 flex items-end justify-end gap-2 pt-1">
                            <button type="submit" class="px-4 py-2 rounded-xl minimal-btn minimal-btn-primary text-sm font-medium inline-flex items-center justify-center gap-2"><span class="iconify text-base" data-icon="solar:check-circle-bold"></span> Upload</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        (function () {
            const openBtn = document.querySelector('[data-upload-open]');
            const closeBtn = document.querySelector('[data-upload-close]');
            const backdrop = document.querySelector('[data-upload-backdrop]');
            const sheet = document.querySelector('[data-upload-sheet]');
            const handleEl = document.querySelector('[data-upload-handle]');
            if (!openBtn || !closeBtn || !backdrop || !sheet) {
                return;
            }

            if (backdrop.parentElement !== document.body) {
                document.body.appendChild(backdrop);
            }
            if (sheet.parentElement !== document.body) {
                document.body.appendChild(sheet);
            }

            let scrollLockY = 0;
            function lockScroll() {
                scrollLockY = window.scrollY || 0;
                document.body.style.position = 'fixed';
                document.body.style.top = `-${scrollLockY}px`;
                document.body.style.left = '0';
                document.body.style.right = '0';
                document.body.style.width = '100%';
                document.body.style.overflow = 'hidden';
            }

            function unlockScroll() {
                document.body.style.position = '';
                const top = document.body.style.top;
                document.body.style.top = '';
                document.body.style.left = '';
                document.body.style.right = '';
                document.body.style.width = '';
                document.body.style.overflow = '';
                const y = top ? Math.abs(parseInt(top, 10)) : scrollLockY;
                window.scrollTo(0, Number.isFinite(y) ? y : 0);
            }

            function open() {
                lockScroll();
                backdrop.classList.remove('opacity-0', 'pointer-events-none');
                backdrop.classList.add('opacity-100');
                sheet.classList.remove('translate-y-full', 'opacity-0', 'pointer-events-none');
                sheet.classList.add('opacity-100');
            }

            function close() {
                backdrop.classList.add('opacity-0', 'pointer-events-none');
                backdrop.classList.remove('opacity-100');
                sheet.classList.add('translate-y-full', 'opacity-0', 'pointer-events-none');
                sheet.classList.remove('opacity-100');
                unlockScroll();
            }

            openBtn.addEventListener('click', open);
            closeBtn.addEventListener('click', close);
            backdrop.addEventListener('click', close);
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    close();
                }
            });

            let startY = 0;
            let dragging = false;
            (handleEl || sheet).addEventListener('touchstart', (e) => {
                dragging = true;
                startY = e.touches[0].clientY;
            });
            window.addEventListener('touchmove', (e) => {
                if (!dragging) {
                    return;
                }
                const dy = e.touches[0].clientY - startY;
                if (dy > 60) {
                    dragging = false;
                    close();
                }
            }, { passive: true });
            window.addEventListener('touchend', () => {
                dragging = false;
            });
        })();

        (function () {
            const input = document.getElementById('librarySearch');
            const list = document.getElementById('libraryResourceList');
            const totalEl = document.getElementById('librarySearchTotal');
            const visibleEl = document.getElementById('librarySearchVisible');
            if (!input || !list || !totalEl || !visibleEl) {
                return;
            }

            const cards = Array.from(list.querySelectorAll('[data-library-resource]'));
            totalEl.textContent = String(cards.length);

            function apply() {
                const q = (input.value || '').trim().toLowerCase();
                let visible = 0;
                cards.forEach((card) => {
                    const hay = String(card.dataset.searchText || '');
                    const ok = !q || hay.includes(q);
                    card.style.display = ok ? '' : 'none';
                    if (ok) {
                        visible += 1;
                    }
                });
                visibleEl.textContent = String(visible);
            }

            input.addEventListener('input', apply);
            apply();
        })();

        (function () {
            const triggers = Array.from(document.querySelectorAll('[data-library-action-trigger]'));
            if (!triggers.length) return;

            let active = null;

            function close() {
                if (!active) return;
                const { host, menu, placeholder, popover } = active;
                menu.classList.add('hidden');
                placeholder.replaceWith(menu);
                popover.remove();
                host.setAttribute('aria-expanded', 'false');
                active = null;
            }

            function open(trigger) {
                close();
                const host = trigger.parentElement;
                const menu = host ? host.querySelector('[data-library-action-menu]') : null;
                if (!menu) return;

                const popover = document.createElement('div');
                popover.style.position = 'fixed';
                popover.style.left = '0px';
                popover.style.top = '0px';
                popover.style.zIndex = '9999';
                document.body.appendChild(popover);

                const placeholder = document.createElement('span');
                menu.replaceWith(placeholder);
                menu.classList.remove('hidden');
                popover.appendChild(menu);

                const r = trigger.getBoundingClientRect();
                const m = menu.getBoundingClientRect();

                const margin = 8;
                let left = r.right - m.width;
                left = Math.max(margin, Math.min(left, window.innerWidth - m.width - margin));

                let top = r.bottom + 6;
                if (top + m.height + margin > window.innerHeight) {
                    top = r.top - m.height - 6;
                }
                top = Math.max(margin, Math.min(top, window.innerHeight - m.height - margin));

                popover.style.left = `${left}px`;
                popover.style.top = `${top}px`;

                const isOwner = (trigger.getAttribute('data-is-owner') || '') === '1';
                const editBtn = menu.querySelector('[data-library-edit]');
                const delForm = menu.querySelector('[data-library-delete-form]');
                const shareBtn = menu.querySelector('[data-library-share]');
                if (editBtn) editBtn.style.display = isOwner ? '' : 'none';
                if (delForm) delForm.style.display = isOwner ? '' : 'none';
                if (shareBtn) shareBtn.style.display = '';

                trigger.setAttribute('aria-expanded', 'true');
                active = { host: trigger, menu, placeholder, popover };
            }

            triggers.forEach((t) => {
                t.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    if (active && active.host === t) {
                        close();
                        return;
                    }
                    open(t);
                });
            });

            document.addEventListener('click', (e) => {
                if (!active) return;
                const target = e.target;
                if (active.host.contains(target)) return;
                if (active.menu.contains(target)) return;
                close();
            });

            window.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') close();
            });
            window.addEventListener('resize', close);
            window.addEventListener('scroll', close, true);

            function activeTrigger() {
                return active ? active.host : null;
            }

            document.addEventListener('click', async (e) => {
                const target = e.target;
                const shareBtn = target.closest ? target.closest('[data-library-share]') : null;
                if (shareBtn) {
                    e.preventDefault();
                    const t = activeTrigger();
                    if (!t) return;
                    const url = t.getAttribute('data-resource-href') || '';
                    const title = t.getAttribute('data-resource-heading') || 'Resource';
                    try {
                        if (navigator.share) {
                            await navigator.share({ title, url });
                        } else if (navigator.clipboard && url) {
                            await navigator.clipboard.writeText(url);
                            alert('Link copied');
                        }
                    } catch (_) {
                    }
                    close();
                    return;
                }

                const editBtn = target.closest ? target.closest('[data-library-edit]') : null;
                if (editBtn) {
                    e.preventDefault();
                    const t = activeTrigger();
                    if (!t) return;
                    const resourceId = t.getAttribute('data-resource-id');
                    const heading = t.getAttribute('data-resource-heading') || '';
                    const description = t.getAttribute('data-resource-description') || '';
                    const tags = t.getAttribute('data-resource-tags') || '';
                    const uploader = t.getAttribute('data-resource-uploader') || '';

                    const nextHeading = (prompt('Heading', heading) || '').trim();
                    if (!nextHeading) return;
                    const nextUploader = (prompt('Uploader', uploader) || '').trim();
                    if (!nextUploader) return;
                    const nextDescription = (prompt('Description', description) || '').trim();
                    if (!nextDescription) return;
                    const nextTags = (prompt('Tags (comma separated)', tags) || '').trim();

                    if (!resourceId) return;
                    const form = document.createElement('form');
                    form.method = 'post';
                    form.action = `/library/resources/${encodeURIComponent(resourceId)}/update`;

                    function hidden(name, value) {
                        const i = document.createElement('input');
                        i.type = 'hidden';
                        i.name = name;
                        i.value = value;
                        return i;
                    }

                    form.appendChild(hidden('heading', nextHeading));
                    form.appendChild(hidden('uploader', nextUploader));
                    form.appendChild(hidden('description', nextDescription));
                    form.appendChild(hidden('tags', nextTags));
                    form.appendChild(hidden('next', window.location.pathname + window.location.search));
                    document.body.appendChild(form);
                    form.submit();
                }
            });
        })();
    </script>
</section>

<form method="get" class="md:hidden">
    <input id="libraryFiltersQ" type="hidden" name="q" value="{{ filters.q if filters else '' }}">
    <div id="libraryFiltersBottomSheet" class="fixed inset-0 z-[70] pointer-events-none opacity-0 transition-opacity duration-300">
        <div class="absolute inset-0 bg-slate-900/70 backdrop-blur-[2px] pointer-events-none" id="libraryFiltersSheetBackdrop"></div>
        <div id="libraryFiltersSheet" class="absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl shadow-2xl transform translate-y-full transition-transform duration-300 pointer-events-auto max-h-[85vh] overflow-hidden">
            <div class="flex justify-center py-3" id="libraryFiltersSheetHandle">
                <div class="w-12 h-1.5 bg-slate-300 rounded-full"></div>
            </div>
            <div class="px-6 pb-4">
                <div class="flex items-center justify-between">
                    <h3 class="text-lg font-semibold text-slate-900">Advanced Filters</h3>
                    <button id="libraryFiltersSheetClose" type="button" class="p-2 rounded-xl hover:bg-slate-100 transition-colors">
                        <span class="iconify text-xl text-slate-600" data-icon="solar:close-circle-bold"></span>
                    </button>
                </div>
                <p class="text-sm text-slate-500 mt-1">Refine your search</p>
            </div>
            <div class="px-6 pb-6 overflow-y-auto" style="max-height: calc(85vh - 140px);">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-2">Tag</label>
                        <input name="tag" value="{{ filters.tag if filters else '' }}" class="w-full minimal-input" placeholder="e.g. DSA">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-2">Uploader</label>
                        <select name="uploader" class="w-full minimal-input">
                            <option value="">All</option>
                            {% for u in uploaders or [] %}
                                <option value="{{ u }}"{% if filters and filters.uploader == u %} selected{% endif %}>{{ u }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="flex flex-col gap-2">
                        <button type="submit" class="w-full px-4 py-3 rounded-xl minimal-btn minimal-btn-primary text-sm font-medium inline-flex items-center justify-center gap-2"><span class="iconify text-base" data-icon="solar:check-circle-bold"></span> Apply</button>
                        <a href="{{ url_for('library') }}" class="w-full px-4 py-3 rounded-xl bg-slate-100 text-slate-700 text-sm font-medium hover:bg-slate-200 transition-all text-center inline-flex items-center justify-center gap-2"><span class="iconify text-base text-amber-600" data-icon="solar:restart-outline"></span> Reset</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
{% endblock %}
